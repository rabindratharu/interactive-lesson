{"version":3,"file":"quiz-block/view.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAY;EACtD,MAAMC,KAAK,GAAGF,QAAQ,CAACG,gBAAgB,CAAC,YAAY,CAAC;EACrDD,KAAK,CAACE,OAAO,CAACC,IAAI,IAAI;IAClBA,IAAI,CAACJ,gBAAgB,CAAC,QAAQ,EAAE,gBAAgBK,CAAC,EAAE;MAC/CA,CAAC,CAACC,cAAc,CAAC,CAAC;MAElB,MAAMC,QAAQ,GAAGH,IAAI,CAACI,YAAY,CAAC,eAAe,CAAC;MACnD,MAAMC,aAAa,GAAGL,IAAI,CAACI,YAAY,CAAC,qBAAqB,CAAC;MAC9D,MAAME,cAAc,GAAGN,IAAI,CAACO,aAAa,CAAC,mCAAmC,CAAC,EAAEC,KAAK;MAErF,IAAI,CAACF,cAAc,EAAE;QACjBG,KAAK,CAAC,0BAA0B,CAAC;QACjC;MACJ;MAEA,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACC,aAAa,CAACC,OAAO,EAAE;UAChDC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACL,cAAc,EAAE,kBAAkB;YAClC,YAAY,EAAEH,aAAa,CAACI;UAChC,CAAC;UACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YACjBhB,QAAQ,EAAEA,QAAQ;YAClBiB,MAAM,EAAEd,cAAc;YACtBe,cAAc,EAAEhB;UACpB,CAAC;QACL,CAAC,CAAC;QAEF,IAAI,CAACK,QAAQ,CAACY,EAAE,EAAE;UACd,MAAMC,KAAK,GAAG,MAAMb,QAAQ,CAACc,IAAI,CAAC,CAAC;UACnC,MAAM,IAAIC,KAAK,CAACF,KAAK,CAACG,OAAO,IAAI,6BAA6B,CAAC;QACnE;QAEA,MAAMC,IAAI,GAAG,MAAMjB,QAAQ,CAACc,IAAI,CAAC,CAAC;QAElC,IAAIG,IAAI,CAACC,OAAO,EAAE;UACd,MAAMC,SAAS,GAAGlC,QAAQ,CAACmC,aAAa,CAAC,KAAK,CAAC;UAC/CD,SAAS,CAACE,SAAS,GAAG,aAAa;UACnCF,SAAS,CAACG,SAAS,GAAG,mBAAmBL,IAAI,CAACP,MAAM,KAAKO,IAAI,CAACD,OAAO,MAAM;UAC3E1B,IAAI,CAACiC,WAAW,CAACJ,SAAS,CAAC;QAC/B,CAAC,MAAM;UACH,MAAM,IAAIJ,KAAK,CAACE,IAAI,CAACD,OAAO,IAAI,mBAAmB,CAAC;QACxD;MACJ,CAAC,CAAC,OAAOH,KAAK,EAAE;QACZW,OAAO,CAACX,KAAK,CAAC,QAAQ,EAAEA,KAAK,CAAC;QAC9Bd,KAAK,CAAC,sBAAsBc,KAAK,CAACG,OAAO,EAAE,CAAC;MAChD;IACJ,CAAC,CAAC;EACN,CAAC,CAAC;AACN,CAAC,CAAC,C","sources":["webpack://interactive-lesson/./assets/src/block/quiz-block/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\ndocument.addEventListener('DOMContentLoaded', function () {\n    const forms = document.querySelectorAll('.quiz-form');\n    forms.forEach(form => {\n        form.addEventListener('submit', async function (e) {\n            e.preventDefault();\n\n            const question = form.getAttribute('data-question');\n            const correctAnswer = form.getAttribute('data-correct-answer');\n            const selectedAnswer = form.querySelector('input[name=\"quiz_answer\"]:checked')?.value;\n\n            if (!selectedAnswer) {\n                alert('Please select an answer.');\n                return;\n            }\n\n            try {\n                const response = await fetch(quizBlockData.restUrl, {\n                    method: 'POST',\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'X-WP-Nonce': quizBlockData.nonce\n                    },\n                    body: JSON.stringify({\n                        question: question,\n                        answer: selectedAnswer,\n                        correct_answer: correctAnswer\n                    })\n                });\n\n                if (!response.ok) {\n                    const error = await response.json();\n                    throw new Error(error.message || 'Network response was not ok');\n                }\n\n                const data = await response.json();\n\n                if (data.success) {\n                    const resultDiv = document.createElement('div');\n                    resultDiv.className = 'quiz-result';\n                    resultDiv.innerHTML = `<p>Your answer: ${data.answer}. ${data.message}</p>`;\n                    form.replaceWith(resultDiv);\n                } else {\n                    throw new Error(data.message || 'Submission failed');\n                }\n            } catch (error) {\n                console.error('Error:', error);\n                alert(`An error occurred: ${error.message}`);\n            }\n        });\n    });\n});"],"names":["document","addEventListener","forms","querySelectorAll","forEach","form","e","preventDefault","question","getAttribute","correctAnswer","selectedAnswer","querySelector","value","alert","response","fetch","quizBlockData","restUrl","method","headers","nonce","body","JSON","stringify","answer","correct_answer","ok","error","json","Error","message","data","success","resultDiv","createElement","className","innerHTML","replaceWith","console"],"sourceRoot":""}